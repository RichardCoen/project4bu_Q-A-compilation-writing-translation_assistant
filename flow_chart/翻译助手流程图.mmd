flowchart TD
  A[入口与鉴权] -->|未登录| A1[引导登录/注册]
  A1 --> A
  A --> B{选择模式}
  B -- 文档翻译 --> B1[选择文件并上传]
  B -- 实时翻译 --> B2[开始录音/文本输入]
  B1 --> C{校验通过?（大小/格式/元信息）}
  C -- 否 --> C1[提示原因并返回重新选择]
  C -- 是 --> D[加密存储至对象存储]
  D --> E[解析与预处理\n（OCR/版面重建/文本抽取）]
  E --> H{触发翻译与对齐（并行/流式）}
  H --> H1[术语匹配与命名实体保障]
  H --> H2[机器翻译与格式保持]
  H --> H3[对齐与质量评估/校对]
  H1 --> I[结果展示与联动]
  H2 --> I
  H3 --> I
  I --> I1[原文/译文两栏对齐\n术语高亮与定位跳转]
  I1 --> J[导出/分享（原格式回填/双语对照/PDF）]
  J --> K{导出成功?}
  K -- 否 --> K1[提示重试或更换格式]
  K -- 是 --> K2[提供下载/分享入口]
  X1[未登录] --> A1
  X2[格式不支持/参数不合规] --> C1
  X3[上传失败/网络中断] --> D
  X4[解析失败] --> E
  X5[翻译失败/术语冲突] --> H
  X6[导出失败] --> K1
